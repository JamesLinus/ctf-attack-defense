Основное назначение платформы - общение с сервисами команд-участников посредством отправки и проверки специально сгенерированных флагов на сервере. Предназначение этого модуля - работа с интерфейсом сервисов (чекерами).

\subsubsection{Принцип работы}
Игра делится на раунды, обычно длится 1 минуту (настраивается при инициализации). Интерфейс для работы модуля с сервисом называется чекер. Каждый раунд модуль генерирует задания на проверку всех сервисов команд-участников (master сервер). Далее, задания отправляются в очередь, где ожидают, что их получат сервера, отвечающие за взаимодействие с сервисами команд-участников (slave сервер). После выполнения задачи slave сервер отправляет подтверждение master серверу, который, в свою очередь, делает запись в БД, о завершении проверки. Такая структура взаимодействия модуля с сервисами дает возможность горизонтального масштабирования системы без особых трудностей. Структура ваимодействия master сервера со slave серверами представлена на рисунке 5.4.

\begin{figure}[ht!]
\center{\includegraphics[width=1.0\linewidth]{images/module_round_structure.png}}
\caption{Иерархическая структура взаимодействия модуля с сервисами}
\end{figure}

Проверка сервиса команды slave сервером происходит в три этапа:
\begin{enumerate} 
\item Проверка работоспособности сервиса команды-участника;
\item Отправление флага на сервис; 
\item Проверка того, что флаг сохранен.
\end{enumerate}

На каждом этапе модуль ожидает в ответ один из четырех чисел: 101, 102, 103, 104. Эти числа также называются статусом сервиса команды-участника. 



Число 101 соответствует успешной работе сервиса команды-участника. Число 102 означает, что сервис команды работает, но на каком-то этапе отвечает некорректно. Число 103 означает, сервис команды отвечает, но не работает из-за какой-либо ошибки. Число 104 означает, что сервис команды не отвечает на запрос. 

Если на каком-то этапе чекер возвращает число отличное от 101, дальнейшее выполнение программы прекращается, а статус чекера записывается в базу данных.

На 1 этапе каждому чекеру посылается адрес сервера команды-участника. 
На 2 этапе каждому чекеру посылается адрес сервера, идентификатор флага и сам флаг. 
На 3 этапе каждому чекеру посылается адрес сервера, идентификатор флага и сам флаг.

Алгоритм работы представлен на рисунке 5.5.
\begin{figure}[ht!]
\center{\includegraphics[width=0.3\linewidth]{images/module_round_toservice.png}}
\caption{Блок-схема работы с каждым сервисом каждой команды-участника}
\end{figure}

Также доступен вариант без использования сервера очередей, основанный на многопоточности. Каждому потоку задается ограничение по времени работы. Это позволяет своевременно завершать процессы, тем самым уменьшается нагрузка на процессор и на потребление памяти. Алгоритм работы представлен на рисунке 5.6. 

\begin{figure}[ht!]
\center{\includegraphics[width=0.5\linewidth]{images/module_round_schema.png}}
\caption{Схема создания потоков}
\end{figure}
